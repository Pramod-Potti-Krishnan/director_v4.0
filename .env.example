# Director Agent v3.4 Environment Variables
# ============================================
#
# v3.4 New Features:
# - 13-type slide classification (3 hero + 10 content)
# - ContentGuidance generation for specialized text generators
# - Service routing to Text Service v1.1 specialized endpoints
# - Batch processing support for parallel content generation
#
# Application Settings
APP_ENV=development
DEBUG=true
LOG_LEVEL=INFO

# API Settings
API_ENABLED=true  # Set to false to disable the Director service
API_HOST=0.0.0.0
PORT=8000

# Supabase Configuration (REQUIRED)
# Get these from your Supabase project settings
SUPABASE_URL=https://your-project.supabase.co  # Required: Get from Supabase project settings
SUPABASE_ANON_KEY=your-supabase-anon-key-here  # Required: Get from Supabase project API settings
SUPABASE_SERVICE_KEY=your-supabase-service-key-here  # Optional but recommended for admin operations



# v3.3: Google Cloud Platform (Vertex AI) - Secure ADC Authentication
# Primary AI Service - Uses Application Default Credentials (NO API KEYS!)
GCP_ENABLED=true
GCP_PROJECT_ID=deckster-xyz
GCP_LOCATION=us-central1

# GCP Authentication:
# - LOCAL DEVELOPMENT: Run 'gcloud auth application-default login' (no env var needed)
# - RAILWAY PRODUCTION: Set GCP_SERVICE_ACCOUNT_JSON with full service account JSON content
# Example (Railway only): GCP_SERVICE_ACCOUNT_JSON={"type":"service_account","project_id":"deckster-xyz",...}

# v3.3: Granular AI Model Configuration (Gemini via Vertex AI Only)
# Each stage uses its own configurable model for maximum cost/performance optimization
# Note: Model names should NOT include 'google-vertex:' prefix (added automatically by code)

# Stage 1: Greeting generation (simple, short response)
GCP_MODEL_GREETING=gemini-1.5-flash

# Stage 2: Clarifying questions (structured JSON output)
GCP_MODEL_QUESTIONS=gemini-1.5-flash

# Stage 3: Confirmation plan (structured JSON output)
GCP_MODEL_PLAN=gemini-1.5-flash

# Stage 4: Strawman generation (complex, detailed presentation outline)
GCP_MODEL_STRAWMAN=gemini-2.0-flash-exp

# Stage 5: Strawman refinement (complex, detailed modifications)
GCP_MODEL_REFINE=gemini-2.0-flash-exp

# Intent classification router (fast, high-volume classification)
GCP_MODEL_ROUTER=gemini-1.5-flash

# ===================================================================
# Cost Optimization Examples:
# ===================================================================
#
# 1. Maximum Cost Savings (~60% cheaper):
#    Use gemini-1.5-flash for all stages
#    GCP_MODEL_GREETING=gemini-1.5-flash
#    GCP_MODEL_QUESTIONS=gemini-1.5-flash
#    GCP_MODEL_PLAN=gemini-1.5-flash
#    GCP_MODEL_STRAWMAN=gemini-1.5-flash
#    GCP_MODEL_REFINE=gemini-1.5-flash
#    GCP_MODEL_ROUTER=gemini-1.5-flash
#
# 2. Balanced Performance (Default - recommended):
#    Cheap models for simple stages, best for complex generation
#    (This is the configuration shown above)
#
# 3. Maximum Quality (Most expensive):
#    Use gemini-2.0-flash-exp for all stages
#    GCP_MODEL_GREETING=gemini-2.0-flash-exp
#    GCP_MODEL_QUESTIONS=gemini-2.0-flash-exp
#    GCP_MODEL_PLAN=gemini-2.0-flash-exp
#    GCP_MODEL_STRAWMAN=gemini-2.0-flash-exp
#    GCP_MODEL_REFINE=gemini-2.0-flash-exp
#    GCP_MODEL_ROUTER=gemini-2.0-flash-exp
#
# 4. Test Different Models Per Stage:
#    Mix and match to find optimal balance for your use case
#    GCP_MODEL_STRAWMAN=gemini-2.0-flash-thinking-exp-1219  # If available
#
# ===================================================================

# Logging & Observability (Optional)
LOGFIRE_TOKEN=your-logfire-token-here
LOGFIRE_ENVIRONMENT=development
LOGFIRE_CONSOLE=true
LOGFIRE_TRACE_SAMPLE_RATE=1.0  # 1.0 = 100% sampling (reduce in production)
LOGFIRE_SEND_TO_LOGFIRE=true  # Set to false to disable sending to Logfire

# Streamlined Protocol Settings
USE_STREAMLINED_PROTOCOL=true
STREAMLINED_PROTOCOL_PERCENTAGE=100  # 0-100, percentage of sessions using streamlined protocol

# v2.0: Deck-Builder Integration
DECK_BUILDER_ENABLED=true
# v3.4: Updated for v7.5-main deck builder
DECK_BUILDER_API_URL=http://localhost:8504  # Local: v7.5-main (port 8504) | Railway: https://web-production-f0d13.up.railway.app
DECK_BUILDER_TIMEOUT=30  # Timeout in seconds for API calls

# v3.4: Text Service v1.2 Integration (Stage 6 - Content Generation with 34 Platinum Variants)
# v3.4-v1.2 uses unified /v1.2/generate endpoint for all content slides
# - Hero slides: /v1.2/hero/{title|section|closing} endpoints
# - Content slides: /v1.2/generate with variant_id selection
# - 34 platinum variants across 10 content types
TEXT_SERVICE_ENABLED=true
TEXT_SERVICE_URL=https://web-production-5daf.up.railway.app  # Text Service v1.2 (Railway production)
TEXT_SERVICE_TIMEOUT=300  # Timeout in seconds (LLM generation can take 30-60s per slide)

# v3.4: Illustrator Service v1.0 Integration (Stage 6 - Data Visualization Generation)
# Handles pyramid and future data visualizations (funnel, SWOT, BCG matrix, timeline, etc.)
# - Aligned with Text Service v1.2 architecture (Director-managed context)
# - Stateless service: Director passes previous_slides explicitly
# - Gemini 1.5 Flash generates visualization content (labels, descriptions)
ILLUSTRATOR_SERVICE_ENABLED=true
ILLUSTRATOR_SERVICE_URL=http://localhost:8000  # Local: Illustrator v1.0 | Railway: TBD
ILLUSTRATOR_SERVICE_TIMEOUT=60  # Timeout in seconds (Pyramid generation ~4s average)

# v3.4: Analytics Service v3 Integration (Stage 6 - Chart Generation with AI Observations)
# Handles L01, L02, L03 analytics layouts with interactive charts + AI-generated insights
# - Returns 2-field response for L02: element_3 (chart HTML) + element_2 (observations)
# - Uses Chart.js for interactive charts + GPT-4o-mini for insights
# - Supports revenue_over_time, market_share, yoy_growth, kpi_metrics, quarterly_comparison
ANALYTICS_SERVICE_ENABLED=true
ANALYTICS_SERVICE_URL=https://analytics-v30-production.up.railway.app  # Railway production
ANALYTICS_SERVICE_TIMEOUT=30  # Timeout in seconds (Chart generation ~3s average)

# Notes:
# 1. Copy this file to .env and fill in your actual values
# 2. Never commit .env to version control
# 3. All SUPABASE_* values come from your Supabase project settings
# 4. v3.3 SECURITY UPDATE: NO MORE API KEYS! Use GCP with ADC for enhanced security
# 5. Local setup: Run 'gcloud auth application-default login' before starting the app
# 6. Railway setup: Add GCP_SERVICE_ACCOUNT_JSON environment variable with service account JSON
# 7. See SECURITY.md for complete security best practices and setup instructions
